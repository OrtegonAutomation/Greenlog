Pantalla_Reportes As screen:
    Fill: =RGBA(249, 250, 251, 1)
    OnVisible: =Set(gblSeccionActiva, "reportes")

    # ── HEADER ──────────────────────────────────────────────────
    Rect_Header_Rep As rectangle:
        X: =0
        Y: =0
        Width: =Parent.Width
        Height: =72
        Fill: =RGBA(0, 34, 102, 1)
        BorderThickness: =0

    Lbl_Header_Rep As label:
        X: =20
        Y: =0
        Width: =Parent.Width - 40
        Height: =72
        Text: ="Reportes y Estadísticas"
        Color: =RGBA(255, 255, 255, 1)
        Size: =17
        FontWeight: =FontWeight.Bold
        VerticalAlign: =VerticalAlign.Middle

    # ── RESUMEN POR ESTADO ───────────────────────────────────────
    Lbl_Sec_Estado As label:
        X: =20
        Y: =84
        Width: =300
        Height: =24
        Text: ="Distribución por Estado"
        Size: =14
        FontWeight: =FontWeight.Bold
        Color: =RGBA(31, 41, 55, 1)

    # Planeada
    Rect_Rep_Plan_BG As rectangle:
        X: =10
        Y: =112
        Width: =Parent.Width - 20
        Height: =48
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Rep_Plan_Lbl As label:
        X: =22
        Y: =120
        Width: =120
        Height: =30
        Text: ="Planeada"
        Size: =13
        Color: =RGBA(31, 41, 55, 1)
        VerticalAlign: =VerticalAlign.Middle

    Rect_Rep_Plan_Bar As rectangle:
        X: =150
        Y: =128
        Width: =If(CountRows(ActividadesAmbientales) > 0,
            (Parent.Width - 200) * CountRows(Filter(ActividadesAmbientales, Estado = "Planeada")) / CountRows(ActividadesAmbientales),
            0)
        Height: =16
        Fill: =RGBA(0, 51, 160, 1)
        BorderThickness: =0
        RadiusTopLeft: =4
        RadiusTopRight: =4
        RadiusBottomLeft: =4
        RadiusBottomRight: =4

    Lbl_Rep_Plan_Num As label:
        X: =Parent.Width - 50
        Y: =120
        Width: =42
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Estado = "Planeada")))
        Size: =13
        FontWeight: =FontWeight.Bold
        Align: =Align.Right
        Color: =RGBA(0, 51, 160, 1)
        VerticalAlign: =VerticalAlign.Middle

    # En Ejecución
    Rect_Rep_Ejec_BG As rectangle:
        X: =10
        Y: =166
        Width: =Parent.Width - 20
        Height: =48
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Rep_Ejec_Lbl As label:
        X: =22
        Y: =174
        Width: =120
        Height: =30
        Text: ="En Ejecución"
        Size: =13
        Color: =RGBA(31, 41, 55, 1)
        VerticalAlign: =VerticalAlign.Middle

    Rect_Rep_Ejec_Bar As rectangle:
        X: =150
        Y: =182
        Width: =If(CountRows(ActividadesAmbientales) > 0,
            (Parent.Width - 200) * CountRows(Filter(ActividadesAmbientales, Estado = "En Ejecución")) / CountRows(ActividadesAmbientales),
            0)
        Height: =16
        Fill: =RGBA(245, 158, 11, 1)
        BorderThickness: =0
        RadiusTopLeft: =4
        RadiusTopRight: =4
        RadiusBottomLeft: =4
        RadiusBottomRight: =4

    Lbl_Rep_Ejec_Num As label:
        X: =Parent.Width - 50
        Y: =174
        Width: =42
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Estado = "En Ejecución")))
        Size: =13
        FontWeight: =FontWeight.Bold
        Align: =Align.Right
        Color: =RGBA(245, 158, 11, 1)
        VerticalAlign: =VerticalAlign.Middle

    # Pendiente Aprobación
    Rect_Rep_PendA_BG As rectangle:
        X: =10
        Y: =220
        Width: =Parent.Width - 20
        Height: =48
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Rep_PendA_Lbl As label:
        X: =22
        Y: =228
        Width: =120
        Height: =30
        Text: ="Pend. Aprob."
        Size: =13
        Color: =RGBA(31, 41, 55, 1)
        VerticalAlign: =VerticalAlign.Middle

    Rect_Rep_PendA_Bar As rectangle:
        X: =150
        Y: =236
        Width: =If(CountRows(ActividadesAmbientales) > 0,
            (Parent.Width - 200) * CountRows(Filter(ActividadesAmbientales, Estado = "Pendiente Aprobación")) / CountRows(ActividadesAmbientales),
            0)
        Height: =16
        Fill: =RGBA(139, 92, 246, 1)
        BorderThickness: =0
        RadiusTopLeft: =4
        RadiusTopRight: =4
        RadiusBottomLeft: =4
        RadiusBottomRight: =4

    Lbl_Rep_PendA_Num As label:
        X: =Parent.Width - 50
        Y: =228
        Width: =42
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Estado = "Pendiente Aprobación")))
        Size: =13
        FontWeight: =FontWeight.Bold
        Align: =Align.Right
        Color: =RGBA(139, 92, 246, 1)
        VerticalAlign: =VerticalAlign.Middle

    # Cerrada
    Rect_Rep_Cerr_BG As rectangle:
        X: =10
        Y: =274
        Width: =Parent.Width - 20
        Height: =48
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Rep_Cerr_Lbl As label:
        X: =22
        Y: =282
        Width: =120
        Height: =30
        Text: ="Cerrada"
        Size: =13
        Color: =RGBA(31, 41, 55, 1)
        VerticalAlign: =VerticalAlign.Middle

    Rect_Rep_Cerr_Bar As rectangle:
        X: =150
        Y: =290
        Width: =If(CountRows(ActividadesAmbientales) > 0,
            (Parent.Width - 200) * CountRows(Filter(ActividadesAmbientales, Estado = "Cerrada")) / CountRows(ActividadesAmbientales),
            0)
        Height: =16
        Fill: =RGBA(140, 198, 63, 1)
        BorderThickness: =0
        RadiusTopLeft: =4
        RadiusTopRight: =4
        RadiusBottomLeft: =4
        RadiusBottomRight: =4

    Lbl_Rep_Cerr_Num As label:
        X: =Parent.Width - 50
        Y: =282
        Width: =42
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Estado = "Cerrada")))
        Size: =13
        FontWeight: =FontWeight.Bold
        Align: =Align.Right
        Color: =RGBA(140, 198, 63, 1)
        VerticalAlign: =VerticalAlign.Middle

    # ── DISTRIBUCIÓN POR PRIORIDAD ───────────────────────────────
    Lbl_Sec_Prior As label:
        X: =20
        Y: =336
        Width: =300
        Height: =24
        Text: ="Distribución por Prioridad"
        Size: =14
        FontWeight: =FontWeight.Bold
        Color: =RGBA(31, 41, 55, 1)

    Rect_Prior_Alta As rectangle:
        X: =10
        Y: =364
        Width: =(Parent.Width - 40) / 3
        Height: =64
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Prior_Alta_Num As label:
        X: =10
        Y: =370
        Width: =(Parent.Width - 40) / 3
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Prioridad = "Alta")))
        Size: =24
        FontWeight: =FontWeight.Bold
        Align: =Align.Center
        Color: =RGBA(239, 68, 68, 1)

    Lbl_Prior_Alta_Lbl As label:
        X: =10
        Y: =400
        Width: =(Parent.Width - 40) / 3
        Height: =22
        Text: ="Alta"
        Size: =12
        Align: =Align.Center
        Color: =RGBA(75, 85, 99, 1)

    Rect_Prior_Media As rectangle:
        X: =20 + (Parent.Width - 40) / 3
        Y: =364
        Width: =(Parent.Width - 40) / 3
        Height: =64
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Prior_Media_Num As label:
        X: =20 + (Parent.Width - 40) / 3
        Y: =370
        Width: =(Parent.Width - 40) / 3
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Prioridad = "Media")))
        Size: =24
        FontWeight: =FontWeight.Bold
        Align: =Align.Center
        Color: =RGBA(245, 158, 11, 1)

    Lbl_Prior_Media_Lbl As label:
        X: =20 + (Parent.Width - 40) / 3
        Y: =400
        Width: =(Parent.Width - 40) / 3
        Height: =22
        Text: ="Media"
        Size: =12
        Align: =Align.Center
        Color: =RGBA(75, 85, 99, 1)

    Rect_Prior_Baja As rectangle:
        X: =30 + 2 * (Parent.Width - 40) / 3
        Y: =364
        Width: =(Parent.Width - 40) / 3
        Height: =64
        Fill: =RGBA(255, 255, 255, 1)
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8

    Lbl_Prior_Baja_Num As label:
        X: =30 + 2 * (Parent.Width - 40) / 3
        Y: =370
        Width: =(Parent.Width - 40) / 3
        Height: =30
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Prioridad = "Baja")))
        Size: =24
        FontWeight: =FontWeight.Bold
        Align: =Align.Center
        Color: =RGBA(0, 51, 160, 1)

    Lbl_Prior_Baja_Lbl As label:
        X: =30 + 2 * (Parent.Width - 40) / 3
        Y: =400
        Width: =(Parent.Width - 40) / 3
        Height: =22
        Text: ="Baja"
        Size: =12
        Align: =Align.Center
        Color: =RGBA(75, 85, 99, 1)

    # ── AVANCE GLOBAL ────────────────────────────────────────────
    Rect_Rep_Avance_Card As rectangle:
        X: =10
        Y: =444
        Width: =Parent.Width - 20
        Height: =72
        Fill: =RGBA(0, 34, 102, 1)
        BorderThickness: =0
        RadiusTopLeft: =12
        RadiusTopRight: =12
        RadiusBottomLeft: =12
        RadiusBottomRight: =12

    Lbl_Rep_Avance_Tit As label:
        X: =22
        Y: =454
        Width: =280
        Height: =22
        Text: ="Avance promedio del programa ambiental"
        Size: =12
        Color: =RGBA(200, 215, 240, 1)

    Lbl_Rep_Avance_Val As label:
        X: =22
        Y: =476
        Width: =160
        Height: =30
        Text: =Text(
            If(CountRows(ActividadesAmbientales) > 0,
               Round(Sum(ActividadesAmbientales, PorcentajeAvance) / CountRows(ActividadesAmbientales), 1),
               0)
        ) & "% completado"
        Size: =18
        FontWeight: =FontWeight.Bold
        Color: =RGBA(140, 198, 63, 1)

    # ── BOTTOM NAV ───────────────────────────────────────────────
    Rect_NavBG_Rep As rectangle:
        X: =0
        Y: =Parent.Height - 70
        Width: =Parent.Width
        Height: =70
        Fill: =RGBA(255, 255, 255, 1)
        BorderColor: =RGBA(229, 231, 235, 1)
        BorderThickness: =1

    Btn_Nav4_Dash As button:
        X: =0
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Dashboard"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Dashboard, ScreenTransition.None)

    Btn_Nav4_Plan As button:
        X: =Parent.Width / 4
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Planeación"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Planeacion, ScreenTransition.None)

    Btn_Nav4_Ejec As button:
        X: =Parent.Width / 2
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Ejecución"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Ejecucion, ScreenTransition.None)

    Btn_Nav4_Rep As button:
        X: =3 * Parent.Width / 4
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Reportes"
        Size: =10
        FontWeight: =FontWeight.Bold
        Fill: =RGBA(240, 244, 255, 1)
        Color: =RGBA(0, 51, 160, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Reportes, ScreenTransition.None)
