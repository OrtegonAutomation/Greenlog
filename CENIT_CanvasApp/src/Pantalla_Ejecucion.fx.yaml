Pantalla_Ejecucion As screen:
    Fill: =RGBA(249, 250, 251, 1)
    OnVisible: =Set(gblSeccionActiva, "ejecucion")

    # ── HEADER ──────────────────────────────────────────────────
    Rect_Header_Ejec As rectangle:
        X: =0
        Y: =0
        Width: =Parent.Width
        Height: =72
        Fill: =RGBA(0, 34, 102, 1)
        BorderThickness: =0

    Lbl_Header_Ejec As label:
        X: =20
        Y: =0
        Width: =Parent.Width - 40
        Height: =72
        Text: ="Control de Ejecución"
        Color: =RGBA(255, 255, 255, 1)
        Size: =17
        FontWeight: =FontWeight.Bold
        VerticalAlign: =VerticalAlign.Middle

    # ── BANNER RESUMEN ───────────────────────────────────────────
    Rect_Banner_Ejec As rectangle:
        X: =10
        Y: =82
        Width: =Parent.Width - 20
        Height: =64
        Fill: =RGBA(245, 158, 11, 1)
        BorderThickness: =0
        RadiusTopLeft: =10
        RadiusTopRight: =10
        RadiusBottomLeft: =10
        RadiusBottomRight: =10

    Lbl_Banner_Activas As label:
        X: =20
        Y: =90
        Width: =280
        Height: =22
        Text: ="Actividades en ejecución activa"
        Size: =13
        FontWeight: =FontWeight.Bold
        Color: =RGBA(255, 255, 255, 1)

    Lbl_Banner_Num As label:
        X: =Parent.Width - 90
        Y: =84
        Width: =76
        Height: =54
        Text: =Text(CountRows(Filter(ActividadesAmbientales, Estado = "En Ejecución")))
        Size: =32
        FontWeight: =FontWeight.Bold
        Color: =RGBA(255, 255, 255, 1)
        Align: =Align.Right
        VerticalAlign: =VerticalAlign.Middle

    Lbl_Banner_Pend As label:
        X: =20
        Y: =114
        Width: =300
        Height: =20
        Text: ="Planeadas: " & Text(CountRows(Filter(ActividadesAmbientales, Estado = "Planeada"))) &
               "  ·  Pend. Aprob.: " & Text(CountRows(Filter(ActividadesAmbientales, Estado = "Pendiente Aprobación")))
        Size: =11
        Color: =RGBA(255, 243, 210, 1)

    # ── TABS ────────────────────────────────────────────────────
    Btn_Tab_EnEjec As button:
        X: =10
        Y: =158
        Width: =(Parent.Width - 30) / 2
        Height: =34
        Text: ="En Ejecución"
        Size: =12
        FontWeight: =FontWeight.Bold
        Fill: =If(gblFiltroEstado = "En Ejecución" || gblFiltroEstado = "Todos",
                  RGBA(0, 51, 160, 1), RGBA(229, 231, 235, 1))
        Color: =If(gblFiltroEstado = "En Ejecución" || gblFiltroEstado = "Todos",
                   RGBA(255, 255, 255, 1), RGBA(75, 85, 99, 1))
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8
        OnSelect: =Set(gblFiltroEstado, "En Ejecución")

    Btn_Tab_Planeada As button:
        X: =20 + (Parent.Width - 30) / 2
        Y: =158
        Width: =(Parent.Width - 30) / 2
        Height: =34
        Text: ="Planeadas"
        Size: =12
        Fill: =If(gblFiltroEstado = "Planeada",
                  RGBA(0, 51, 160, 1), RGBA(229, 231, 235, 1))
        Color: =If(gblFiltroEstado = "Planeada",
                   RGBA(255, 255, 255, 1), RGBA(75, 85, 99, 1))
        BorderThickness: =0
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8
        OnSelect: =Set(gblFiltroEstado, "Planeada")

    # ── GALERÍA DE EJECUCIÓN ─────────────────────────────────────
    Gal_Ejec As gallery.flexible.height:
        X: =0
        Y: =200
        Width: =Parent.Width
        Height: =Parent.Height - 270
        Items: =Filter(ActividadesAmbientales,
            Estado = If(gblFiltroEstado = "Todos", Estado, gblFiltroEstado)
        )
        TemplatePadding: =6
        TemplateSize: =128
        ShowScrollbar: =false

        Rect_Ejec_BG As rectangle:
            X: =10
            Y: =4
            Width: =Parent.Width - 20
            Height: =120
            Fill: =RGBA(255, 255, 255, 1)
            BorderThickness: =0
            RadiusTopLeft: =12
            RadiusTopRight: =12
            RadiusBottomLeft: =12
            RadiusBottomRight: =12

        Lbl_Ejec_Tarea As label:
            X: =20
            Y: =12
            Width: =Parent.Width - 130
            Height: =24
            Text: =ThisItem.Title
            Size: =13
            FontWeight: =FontWeight.Bold
            Color: =RGBA(31, 41, 55, 1)
            Overflow: =Overflow.Hidden

        Lbl_Ejec_Badge As label:
            X: =Parent.Width - 120
            Y: =12
            Width: =110
            Height: =22
            Text: =ThisItem.Estado
            Size: =10
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =If(
                ThisItem.Estado = "En Ejecución", RGBA(245,158,11,1),
                If(ThisItem.Estado = "Planeada", RGBA(0,51,160,1),
                RGBA(139,92,246,1))
            )
            RadiusTopLeft: =11
            RadiusTopRight: =11
            RadiusBottomLeft: =11
            RadiusBottomRight: =11

        Lbl_Ejec_Resp As label:
            X: =20
            Y: =38
            Width: =250
            Height: =18
            Text: ="Responsable: " & ThisItem.Responsable
            Size: =11
            Color: =RGBA(75, 85, 99, 1)

        Lbl_Ejec_Fechas As label:
            X: =20
            Y: =58
            Width: =Parent.Width - 40
            Height: =18
            Text: ="Inicio: " & Text(ThisItem.FechaInicio, "[$-es-CO]dd/mm/yy") &
                   "  →  Fin: " & Text(ThisItem.FechaFin, "[$-es-CO]dd/mm/yy")
            Size: =11
            Color: =RGBA(75, 85, 99, 1)

        Lbl_Ejec_Avance_Lbl As label:
            X: =20
            Y: =80
            Width: =160
            Height: =18
            Text: ="Avance: " & Text(ThisItem.PorcentajeAvance) & "%"
            Size: =12
            FontWeight: =FontWeight.Semibold
            Color: =If(
                ThisItem.PorcentajeAvance >= 80, RGBA(140,198,63,1),
                If(ThisItem.PorcentajeAvance >= 40, RGBA(245,158,11,1),
                RGBA(239,68,68,1))
            )

        Rect_Ejec_Avance_BG As rectangle:
            X: =20
            Y: =100
            Width: =Parent.Width - 90
            Height: =10
            Fill: =RGBA(229, 231, 235, 1)
            BorderThickness: =0
            RadiusTopLeft: =5
            RadiusTopRight: =5
            RadiusBottomLeft: =5
            RadiusBottomRight: =5

        Rect_Ejec_Avance_Bar As rectangle:
            X: =20
            Y: =100
            Width: =Max(0, (Parent.Width - 90) * ThisItem.PorcentajeAvance / 100)
            Height: =10
            Fill: =If(
                ThisItem.PorcentajeAvance >= 80, RGBA(140,198,63,1),
                If(ThisItem.PorcentajeAvance >= 40, RGBA(245,158,11,1),
                RGBA(239,68,68,1))
            )
            BorderThickness: =0
            RadiusTopLeft: =5
            RadiusTopRight: =5
            RadiusBottomLeft: =5
            RadiusBottomRight: =5

        Btn_Ejec_Editar As button:
            X: =Parent.Width - 66
            Y: =96
            Width: =52
            Height: =24
            Text: ="Editar"
            Size: =11
            Fill: =RGBA(0, 51, 160, 1)
            Color: =RGBA(255, 255, 255, 1)
            HoverFill: =RGBA(0, 86, 210, 1)
            BorderThickness: =0
            RadiusTopLeft: =6
            RadiusTopRight: =6
            RadiusBottomLeft: =6
            RadiusBottomRight: =6
            OnSelect: |-
                =Set(gblActividadSeleccionada, ThisItem);
                Navigate(Pantalla_Detalle, ScreenTransition.Fade)

    # ── BOTTOM NAV ───────────────────────────────────────────────
    Rect_NavBG_Ejec As rectangle:
        X: =0
        Y: =Parent.Height - 70
        Width: =Parent.Width
        Height: =70
        Fill: =RGBA(255, 255, 255, 1)
        BorderColor: =RGBA(229, 231, 235, 1)
        BorderThickness: =1

    Btn_Nav3_Dash As button:
        X: =0
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Dashboard"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        HoverFill: =RGBA(249, 250, 251, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Dashboard, ScreenTransition.None)

    Btn_Nav3_Plan As button:
        X: =Parent.Width / 4
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Planeación"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        HoverFill: =RGBA(249, 250, 251, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Planeacion, ScreenTransition.None)

    Btn_Nav3_Ejec As button:
        X: =Parent.Width / 2
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Ejecución"
        Size: =10
        FontWeight: =FontWeight.Bold
        Fill: =RGBA(240, 244, 255, 1)
        Color: =RGBA(0, 51, 160, 1)
        HoverFill: =RGBA(230, 237, 255, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Ejecucion, ScreenTransition.None)

    Btn_Nav3_Rep As button:
        X: =3 * Parent.Width / 4
        Y: =Parent.Height - 70
        Width: =Parent.Width / 4
        Height: =70
        Text: ="Reportes"
        Size: =10
        Fill: =RGBA(255, 255, 255, 1)
        Color: =RGBA(75, 85, 99, 1)
        HoverFill: =RGBA(249, 250, 251, 1)
        BorderThickness: =0
        OnSelect: =Navigate(Pantalla_Reportes, ScreenTransition.None)
